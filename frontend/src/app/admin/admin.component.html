<h2>Overview of Users</h2>

<!-- <button mat-button (click)="addUser()" style="margin-bottom: 1em;">Add test user</button> -->
<button mat-button (click)="updateQuestionnaire()" style="margin-bottom: 1em;">Update Questionnaire</button>
<a reouterLink="/corrections"><button mat-button>Corrections</button></a>

<h3>Questionnaire title is {{title}}</h3>

<div *ngIf="users.length > 0">
  <mat-slide-toggle (change)="showResultsUpdate($event)" [checked]="showResults" style="margin: 0 1em 1em;">
    Show Results
  </mat-slide-toggle>
  <mat-slide-toggle (change)="editingAllowedUpdate($event)" [checked]="editingAllowed" style="margin: 0 1em 1em;">
    Editing Allowed
  </mat-slide-toggle>
  <table style="width: 100%">
    <tr>
      <th style="width: 10em;">Name</th>
      <th style="width: 2em;" *ngFor="let row of displayedColumns; index as i">{{i+1}}</th>
    </tr>
    @for (user of users; track $index){
    <tr>
      <td>{{user.name.slice(0, 20)}}</td>
      @for (choice of user.answers; track idx; let idx = $index, e = $even){
      <td [class]="selectedClasses[$index][idx]"></td>
      }
    </tr>
    }
  </table>
</div>